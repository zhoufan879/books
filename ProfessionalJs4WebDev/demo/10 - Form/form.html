<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>表单</title>
		<script src="../../js/code.js" type="text/javascript" charset="utf-8"></script>

	</head>
	<body>
		<h1>
			Form 表单
		</h1>
		<p>
		</p>
		
		<input type="text" name="username" minlength="3" maxlength="10" pattern="[a-z].*" placeholder="please enter your name"  required/>
		<span id="_span" style="color: red;"></span>
		
		
		
		
		
		<script type="text/javascript" id="js">
			
			var _input = document.querySelector("input[name='username']");
			var _span = document.getElementById("_span")
			
			_input.addEventListener("keyup", function (e) {
				console.dir( _input.validity );
				
				validator( _input.validity );
			});
			

			var _err = {
				"patternMismatch": "格式不正确",
				"valueMissing": "name is required.",
				"tooShort": "你，太短了"
			}
			
			function validator (v) {
				console.log( v.valid );
				if( v && !v.valid ) {
					
					if(v.valueMissing){
						_span.textContent = _err.valueMissing;
					}
					if(v.patternMismatch){
						_span.textContent = _err.patternMismatch;
					}
					if(v.tooShort){
						_span.textContent = _err.tooShort;
					}
					
				} else {
					_span.textContent = "";
				}
			}
			
			
		</script>
	</body>
</html>
